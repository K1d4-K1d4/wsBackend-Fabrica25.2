{% extends 'pokedex/base.html' %}

{% block title %}Buscar Pokémon{% endblock %}

{% block content %}
   <div class="auth-card" style="max-width: 500px; margin: 0 auto;">
      <h2>Buscar na Pokédex Online</h2>
      <form method="GET">
         <p>
            <label for="id_q">Nome ou ID do Pokémon</label>
            <input id="id_q" type="text" name="q" placeholder="Ex: pikachu ou 25" value="{{ query|default:'' }}">
         </p>
         <button type="submit" class="btn" style="width: 100%;">Buscar</button>
      </form>

      {% if error %}
         <div class="message error">{{ error }}</div>
      {% endif %}

      {% if success_message %}
         <div class="message success">{{ success_message }}</div>
      {% endif %}

      {% if pokemon %}
         <hr style="margin: 30px 0;">
         <div class="pokemon-card" style="border: none; box-shadow: none; padding: 0;">
            {# Carrega a versão maior do sprite, que geralmente é a versão oficial #}
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/{{ pokemon.id }}.png" alt="{{ pokemon.nome }}" style="width: 150px; height: 150px;">
            <h3 style="font-size: 1.8em;">{{ pokemon.nome }}</h3>
            <p><strong>ID:</strong> {{ pokemon.id }} | <strong>Tipo:</strong> {{ pokemon.tipo }}</p>
            <p><strong>Altura:</strong> {{ pokemon.altura_cm }} cm | <strong>Peso:</strong> {{ pokemon.peso_kg }} kg</p>
            
            <form method="POST" style="margin-top: 20px;">
               {% csrf_token %}
               <input type="hidden" name="pokemon_id" value="{{ pokemon.id }}">
               <p>
                  <label for="id_apelido">Apelido (opcional)</label>
                  <input id="id_apelido" type="text" name="apelido" placeholder="Dê um apelido para seu Pokémon">
               </p>
               <button type="submit" class="btn" style="width: 100%;">Adicionar à Equipe</button>
            </form>
         </div>
      {% endif %}
   </div>
{% endblock %}